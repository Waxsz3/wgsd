<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>万古神帝-无广告版</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            font-family: "宋体";
        }

        body {
            height: 100vh;
        }

        .header {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 50px;
            background-color: #000000;
            /* border-radius: 0 0 10px 10px; */
            color: #fff;
            font-size: 14px;
        }

        .header div ,.header a{
            margin: 0 5%;
            letter-spacing: 2px;
            text-decoration: none;
            color: #fff;
        }

        .chapter_content_container {
            box-sizing: border-box;
            padding: 10px 5%;
            line-height: 30px;
            letter-spacing: 1px;
        }
    </style>
</head>

<body>
    <div class="header">
        <div class="Previous_chapter">上一章</div>
        <a href="./directory_page.html" class="directory">目录</a>
        <div class="Next_chapter">下一章</div>
    </div>
    <div class="chapter_content_container"></div>

    <script>
        let chapter_content_container = document.querySelector(
            ".chapter_content_container"
        );
        let Previous_chapter = document.querySelector(".Previous_chapter");
        let Next_chapter = document.querySelector(".Next_chapter");

        let chapterIndex;

        // 当前章节
        if (localStorage.getItem("chapterIndex") == null) {
            localStorage.setItem("chapterIndex", "1");
        } else {
            chapterIndex = localStorage.getItem("chapterIndex");
        }

        fetch("./novel.json")
            .then((response) => response.json())
            .then((data) => {
                // 小说所有章节数据
                let all_chapter_data = data["RECORDS"];

                console.log(all_chapter_data[Number(chapterIndex) - 1]);

                chapter_content_container.innerText =
                    all_chapter_data[Number(chapterIndex) - 1].chapterContent;

                Previous_chapter.onclick = () => {
                    console.log("Previous_chapter");

                    if (Number(chapterIndex) > 1) {
                        chapterIndex = String(Number(chapterIndex) - 1);
                        localStorage.setItem("chapterIndex", chapterIndex);
                        chapterIndex = localStorage.getItem("chapterIndex");
                        chapterIndex.innerText="";
                        chapter_content_container.innerText =
                            all_chapter_data[Number(chapterIndex) - 1].chapterContent;
                    }
                };
                Next_chapter.onclick = () => {
                    console.log("Next_chapter");

                    if (Number(chapterIndex) < all_chapter_data.length - 1) {

                        chapterIndex = String(Number(chapterIndex) + 1);
                        localStorage.setItem("chapterIndex", chapterIndex);
                        chapterIndex = localStorage.getItem("chapterIndex");
                        chapterIndex.innerText="";
                        chapter_content_container.innerText =
                            all_chapter_data[Number(chapterIndex) - 1].chapterContent;
                    }
                };
            })
            .catch((error) => {
                console.error("获取数据时出错:", error);
            });
    </script>
</body>

</html>
